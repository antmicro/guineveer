# this is guineveer's top-level design which you can show in KPM using `topwrap gui -d design.yaml`

design:
  name: guineveer
  parameters:
    lmem:
      ADDR_WIDTH: 17
      DATA_WIDTH: 64
      ID_WIDTH: 4
      AXI_REQ_T: axi_req_t
      AXI_RESP_T: axi_resp_t
      GUINEVEER_MEMORY_FILE: "`HEX_FILE0"
    i_axi_cdc_lsu:
      aw_chan_t:  axi_addr_chan_t
      w_chan_t:   axi_w_chan_t
      b_chan_t:   axi_b_chan_t
      ar_chan_t:  axi_addr_chan_t
      r_chan_t:   axi_r_chan_t
      axi_req_t:  axi_req_t
      axi_resp_t: axi_resp_t
    axi_bridge:
      TAG: 4
    i3c_core:
      AxiAddrWidth: 32
      AxiDataWidth: 64
      AxiUserWidth: 1
      AxiIdWidth: 4
  interfaces:
    i_axi_cdc_lsu:
      s_axi_src: [axi_interconnect, i3c]
    axi_bridge:
      axi: [axi_interconnect, uart]
    axi_interconnect:
      veer_ifu: [rvtop_wrapper, ifu_axi]
      veer_lsu: [rvtop_wrapper, lsu_axi]
    i3c_core:
      axi: [i_axi_cdc_lsu, m_axi_dst]
    uart_core:
      ahb: [axi_bridge, ahb]
    lmem:
      s_axi_sram: [axi_interconnect, mem]
    rvtop_wrapper:
      el2_mem_export: [rvtop_wrapper, el2_icache_export]
  ports:
    i_axi_cdc_lsu:
      src_clk_i: clk_i
      src_rst_ni: rst_ni
      dst_clk_i: i3c_clk_i
      dst_rst_ni: i3c_rst_ni
    axi_bridge:
      bus_clk_en: 1
      clk: clk_i
      clk_override: 0
      dec_tlu_force_halt: 0
      free_clk: clk_i
      rst_l: rst_ni
      scan_mode: 0
      ahb_hready: 1
    axi_interconnect:
      clk_i: clk_i
      rst_ni: rst_ni
    rvtop_wrapper:
      clk: clk_i
      core_id: 0
      i_cpu_halt_req: 0
      i_cpu_run_req: 0
      dbg_bus_clk_en: 1
      dma_bus_clk_en: 1
      ifu_bus_clk_en: 1
      lsu_bus_clk_en: 1
      mbist_mode: 0
      mpc_debug_halt_req: 0
      mpc_debug_run_req: 0
      mpc_reset_run_req: 1
      rst_l: cpu_rst_ni
      scan_mode: 0
      soft_int: 0
      rst_vec: 0x40000000
    lmem:
      clk_i: clk_i
      rst_ni: rst_ni
    i3c_core:
      clk_i: i3c_clk_i
      rst_ni: i3c_rst_ni
      disable_id_filtering_i: 1
      priv_ids_i: '' # Mentioned but unconnected intentionally to silence warning
      scl_i: i3c_scl_i
      sda_i: i3c_sda_i
      scl_o: i3c_scl_o
      sda_o: i3c_sda_o
      scl_oe: i3c_scl_oe
      sda_oe: i3c_sda_oe
      sel_od_pp_o: i3c_sel_od_pp_o
    uart_core:
      uart_rx_i: uart_rx_i
      uart_tx_o: uart_tx_o
      clk_i: clk_i
      rst_ni: rst_ni
external:
  ports:
    in:
    - clk_i
    - rst_ni
    - i3c_clk_i
    - i3c_rst_ni
    - i3c_sda_i
    - i3c_scl_i
    - cpu_rst_ni
    - uart_rx_i
    out:
    - i3c_sda_o
    - i3c_scl_o
    - i3c_sda_oe
    - i3c_scl_oe
    - i3c_sel_od_pp_o
    - uart_tx_o
ips:
  i_axi_cdc_lsu:
    file: file:./ipcores/axi_cdc_stub.yaml
  lmem:
    file: file:./ipcores/guineveer_sram_stub.yaml
  axi_bridge:
    file: file:./ipcores/axi4_to_ahb.yaml
  axi_interconnect:
    file: file:./ipcores/axi_intercon.yaml
  rvtop_wrapper:
    file: file:./ipcores/el2_veer_wrapper.yaml
  i3c_core:
    file: file:./ipcores/i3c_wrapper.yaml
  uart_core:
    file: file:./ipcores/wrapped_uart.yaml
