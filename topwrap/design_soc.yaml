# this is how the Design Description could look like if we supported an AXI interconnect

design:
  interfaces:
    uart:
      ahb: [axi4_to_ahb, ahb]
    i3c_cdc:
      m_axi_src: [i3c_wrapper, axi]

  interconnects:
    axi_intercon:
      clock: clk_i
      reset: rst_ni
      type: pulp_axi
      managers:
        el2_veer_wrapper: [ifu_axi, lsu_axi]
      subordinates:
        axi4_to_ahb:
          axi:
            address: 0x30000000
            size: 0x1000
        i3c_cdc:
          s_axi_src:
            address: 0x30001000
            size: 0x1000
        guineveer_sram:
          s_axi_sram:
            address: 0x80000000
            size: 0x1f400

  ports:
    axi4_to_ahb:
      bus_clk_en: 1
      clk: clk_i
      clk_override: 0
      dec_tlu_force_halt: 0
      free_clk: clk_i
      rst_l: rst_ni
      scan_mode: 0
    el2_veer_wrapper:
      clk: clk_i
      core_id: 0
      cpu_halt_req_i: 0
      cpu_run_req_i: 0
      dbg_bus_clk_en: 1
      dma_bus_clk_en: 1
      ifu_bus_clk_en: 1
      lsu_bus_clk_en: 1
      mbist_mode: 0
      mpc_debug_halt_req: 0
      mpc_debug_run_req: 0
      mpc_reset_run_req: 1
      rst_l: cpu_rst_ni
      scan_mode: 0
      soft_int: 0
    guineveer_sram:
      clk_i: clk_i
      rst_ni: rst_ni
    i3c_cdc:
      src_clk_i: clk_i
      src_rst_ni: rst_ni
      dst_clk_i: i3c_clk_i
      dst_rst_ni: i3c_rst_ni
    i3c_wrapper:
      clk_i: i3c_clk_i
      rst_ni: i3c_rst_ni
    uart:
      cio_rx_i: uart_rx_i
      cio_tx_o: uart_tx_o
      clk_i: clk_i
      rst_ni: rst_ni

external:
  ports:
    in:
    - clk_i
    - rst_ni
    - i3c_clk_i
    - i3c_rst_ni
    - cpu_rst_ni
    - uart_rx_i
    inout:
    - [i3c_wrapper, i3c_scl_io]
    - [i3c_wrapper, i3c_sda_io]
    out:
    - uart_tx_o

ips:
  axi4_to_ahb:
    file: file:../build/ipcores/axi4_to_ahb.yaml
  el2_veer_wrapper:
    file: file:../build/ipcores/el2_veer_wrapper.yaml
  guineveer_sram:
    file: file:../build/ipcores/wrapped_sram.yaml
  i3c_cdc:
    file: file:../build/ipcores/wrapped_axi_cdc.yaml
  i3c_wrapper:
    file: file:../build/ipcores/i3c_wrapper.yaml
  uart:
    file: file:../build/ipcores/uart.yaml
